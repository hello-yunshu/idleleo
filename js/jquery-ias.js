/* * Infinite Ajax Scroll v2.3.1 - MIT license - Copyright (c) 2018 Webcreate (Jeroen Fiege) */
var IASCallbacks=function(aJquery){this.list=[];this.fireStack=[];this.isFiring=false;this.isDisabled=false;this.Deferred=aJquery.Deferred;this.fire=function(args){var context=args[0],deferred=args[1],callbackArguments=args[2];this.isFiring=true;for(var i=0,l=this.list.length;i<l;i++){if(this.list[i]!=undefined){if(false===this.list[i].fn.apply(context,callbackArguments)){deferred.reject();break}}}this.isFiring=false;deferred.resolve();if(this.fireStack.length){this.fire(this.fireStack.shift())}};this.inList=function(callback,index){index=index||0;for(var i=index,length=this.list.length;i<length;i++){if(this.list[i].fn===callback||(callback.guid&&this.list[i].fn.guid&&callback.guid===this.list[i].fn.guid)){return i}}return-1};return this};IASCallbacks.prototype={add:function(callback,priority){var callbackObject={fn:callback,priority:priority};priority=priority||0;for(var i=0,length=this.list.length;i<length;i++){if(priority>this.list[i].priority){this.list.splice(i,0,callbackObject);return this}}this.list.push(callbackObject);return this},remove:function(callback){var index=0;while((index=this.inList(callback,index))>-1){this.list.splice(index,1)}return this},has:function(callback){return(this.inList(callback)>-1)},fireWith:function(context,args){var deferred=this.Deferred();if(this.isDisabled){return deferred.reject()}args=args||[];args=[context,deferred,args.slice?args.slice():args];if(this.isFiring){this.fireStack.push(args)}else{this.fire(args)}return deferred},disable:function(){this.isDisabled=true},enable:function(){this.isDisabled=false}};(function($){'use strict';var UNDETERMINED_SCROLLOFFSET=-1;var IAS=function($element,options){this.itemsContainerSelector=options.container;this.itemSelector=options.item;this.nextSelector=options.next;this.paginationSelector=options.pagination;this.$scrollContainer=$element;this.$container=(window===$element.get(0)?$(document):$element);this.defaultDelay=options.delay;this.negativeMargin=options.negativeMargin;this.nextUrl=null;this.isBound=false;this.isPaused=false;this.isInitialized=false;this.jsXhr=false;this.listeners={next:new IASCallbacks($),load:new IASCallbacks($),loaded:new IASCallbacks($),render:new IASCallbacks($),rendered:new IASCallbacks($),scroll:new IASCallbacks($),noneLeft:new IASCallbacks($),ready:new IASCallbacks($)};this.extensions=[];this.scrollHandler=function(){if(!this.isBound||this.isPaused){return}var currentScrollOffset=this.getCurrentScrollOffset(this.$scrollContainer),scrollThreshold=this.getScrollThreshold();if(UNDETERMINED_SCROLLOFFSET==scrollThreshold){return}this.fire('scroll',[currentScrollOffset,scrollThreshold]);if(currentScrollOffset>=scrollThreshold){this.next()}};this.getItemsContainer=function(){return $(this.itemsContainerSelector,this.$container)};this.getLastItem=function(){return $(this.itemSelector,this.getItemsContainer().get(0)).last()};this.getFirstItem=function(){return $(this.itemSelector,this.getItemsContainer().get(0)).first()};this.getScrollThreshold=function(negativeMargin){var $lastElement;negativeMargin=negativeMargin||this.negativeMargin;negativeMargin=(negativeMargin>=0?negativeMargin*-1:negativeMargin);$lastElement=this.getLastItem();if(0===$lastElement.length){return UNDETERMINED_SCROLLOFFSET}return($lastElement.offset().top+$lastElement.height()+negativeMargin)};this.getCurrentScrollOffset=function($container){var scrollTop=0,containerHeight=$container.height();if(window===$container.get(0)){scrollTop=$container.scrollTop()}else{scrollTop=$container.offset().top}if(navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1){containerHeight+=80}return(scrollTop+containerHeight)};this.getNextUrl=function(container){container=container||this.$container;return $(this.nextSelector,container).last().attr('href')};this.load=function(url,callback,delay){var self=this,$itemContainer,items=[],timeStart=+new Date(),timeDiff;delay=delay||this.defaultDelay;var loadEvent={url:url,ajaxOptions:{dataType:'html'}};self.fire('load',[loadEvent]);function xhrDoneCallback(data){$itemContainer=$(this.itemsContainerSelector,data).eq(0);if(0===$itemContainer.length){$itemContainer=$(data).filter(this.itemsContainerSelector).eq(0)}if($itemContainer){$itemContainer.find(this.itemSelector).each(function(){items.push(this)})}self.fire('loaded',[data,items]);if(callback){timeDiff=+new Date()-timeStart;if(timeDiff<delay){setTimeout(function(){callback.call(self,data,items)},delay-timeDiff)}else{callback.call(self,data,items)}}}this.jsXhr=$.ajax(loadEvent.url,loadEvent.ajaxOptions).done($.proxy(xhrDoneCallback,self));return this.jsXhr};this.render=function(items,callback){var self=this,$lastItem=this.getLastItem(),count=0;var promise=this.fire('render',[items]);promise.done(function(){$(items).hide();$lastItem.after(items);$(items).fadeIn(400,function(){if(++count<items.length){return}self.fire('rendered',[items]);if(callback){callback()}})});promise.fail(function(){if(callback){callback()}})};this.hidePagination=function(){if(this.paginationSelector){$(this.paginationSelector,this.$container).hide()}};this.restorePagination=function(){if(this.paginationSelector){$(this.paginationSelector,this.$container).show()}};this.throttle=function(callback,delay){var lastExecutionTime=0,wrapper,timerId;wrapper=function(){var that=this,args=arguments,diff=+new Date()-lastExecutionTime;function execute(){lastExecutionTime=+new Date();callback.apply(that,args)}if(!timerId){execute()}else{clearTimeout(timerId)}if(diff>delay){execute()}else{timerId=setTimeout(execute,delay)}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++}return wrapper};this.fire=function(event,args){return this.listeners[event].fireWith(this,args)};this.pause=function(){this.isPaused=true};this.resume=function(){this.isPaused=false};return this};IAS.prototype.initialize=function(){if(this.isInitialized){return false}var supportsOnScroll=(!!('onscroll'in this.$scrollContainer.get(0))),currentScrollOffset=this.getCurrentScrollOffset(this.$scrollContainer),scrollThreshold=this.getScrollThreshold();if(!supportsOnScroll){return false}this.hidePagination();this.bind();this.nextUrl=this.getNextUrl();if(!this.nextUrl){this.fire('noneLeft',[this.getLastItem()])}if(this.nextUrl&&currentScrollOffset>=scrollThreshold){this.next();this.one('rendered',function(){this.isInitialized=true;this.fire('ready')})}else{this.isInitialized=true;this.fire('ready')}return this};IAS.prototype.reinitialize=function(){this.isInitialized=false;this.unbind();this.initialize()};IAS.prototype.bind=function(){if(this.isBound){return}this.$scrollContainer.on('scroll',$.proxy(this.throttle(this.scrollHandler,150),this));for(var i=0,l=this.extensions.length;i<l;i++){this.extensions[i].bind(this)}this.isBound=true;this.resume()};IAS.prototype.unbind=function(){if(!this.isBound){return}this.$scrollContainer.off('scroll',this.scrollHandler);for(var i=0,l=this.extensions.length;i<l;i++){if(typeof this.extensions[i]['unbind']!='undefined'){this.extensions[i].unbind(this)}}this.isBound=false};IAS.prototype.destroy=function(){try{this.jsXhr.abort()}catch(e){}this.unbind();this.$scrollContainer.data('ias',null)};IAS.prototype.on=function(event,callback,priority){if(typeof this.listeners[event]=='undefined'){throw new Error('There is no event called "'+event+'"');}priority=priority||0;this.listeners[event].add($.proxy(callback,this),priority);if(this.isInitialized){if(event==='ready'){$.proxy(callback,this)()}else if(event==='noneLeft'&&!this.nextUrl){$.proxy(callback,this)()}}return this};IAS.prototype.one=function(event,callback){var self=this;var remover=function(){self.off(event,callback);self.off(event,remover)};this.on(event,callback);this.on(event,remover);return this};IAS.prototype.off=function(event,callback){if(typeof this.listeners[event]=='undefined'){throw new Error('There is no event called "'+event+'"');}this.listeners[event].remove(callback);return this};IAS.prototype.next=function(){var url=this.nextUrl,self=this;if(!url){return false}this.pause();var promise=this.fire('next',[url]);promise.done(function(){self.load(url,function(data,items){self.render(items,function(){self.nextUrl=self.getNextUrl(data);if(!self.nextUrl){self.fire('noneLeft',[self.getLastItem()])}self.resume()})})});promise.fail(function(){self.resume()});return true};IAS.prototype.extension=function(extension){if(typeof extension['bind']=='undefined'){throw new Error('Extension doesn\'t have required method "bind"');}if(typeof extension['initialize']!='undefined'){extension.initialize(this)}this.extensions.push(extension);if(this.isBound){this.reinitialize()}return this};$.ias=function(option){var $window=$(window);return $window.ias.apply($window,arguments)};$.fn.ias=function(option){var args=Array.prototype.slice.call(arguments);var retval=this;this.each(function(){var $this=$(this),instance=$this.data('ias'),options=$.extend({},$.fn.ias.defaults,$this.data(),typeof option=='object'&&option);if(!instance){$this.data('ias',(instance=new IAS($this,options)));if(options.initialize){$(document).ready($.proxy(instance.initialize,instance))}}if(typeof option==='string'){if(typeof instance[option]!=='function'){throw new Error('There is no method called "'+option+'"');}args.shift();instance[option].apply(instance,args)}retval=instance});return retval};$.fn.ias.defaults={item:'.item',container:'.listing',next:'.next',pagination:false,delay:600,negativeMargin:10,initialize:true}})(jQuery);var IASHistoryExtension=function(options){options=jQuery.extend({},this.defaults,options);this.ias=null;this.prevSelector=options.prev;this.prevUrl=null;this.listeners={prev:new IASCallbacks(jQuery)};this.onPageChange=function(pageNum,scrollOffset,url){if(!window.history||!window.history.replaceState){return}var state=history.state;history.replaceState(state,document.title,url)};this.onScroll=function(currentScrollOffset,scrollThreshold){var firstItemScrollThreshold=this.getScrollThresholdFirstItem();if(!this.prevUrl){return}currentScrollOffset-=this.ias.$scrollContainer.height();if(currentScrollOffset<=firstItemScrollThreshold){this.prev()}};this.onReady=function(){var currentScrollOffset=this.ias.getCurrentScrollOffset(this.ias.$scrollContainer),firstItemScrollThreshold=this.getScrollThresholdFirstItem();currentScrollOffset-=this.ias.$scrollContainer.height();if(currentScrollOffset<=firstItemScrollThreshold){this.prev()}};this.getPrevUrl=function(container){if(!container){container=this.ias.$container}return jQuery(this.prevSelector,container).last().attr('href')};this.getScrollThresholdFirstItem=function(){var $firstElement;$firstElement=this.ias.getFirstItem();if(0===$firstElement.length){return-1}return($firstElement.offset().top)};this.renderBefore=function(items,callback){var ias=this.ias,$firstItem=ias.getFirstItem(),count=0;ias.fire('render',[items]);jQuery(items).hide();$firstItem.before(items);jQuery(items).fadeIn(400,function(){if(++count<items.length){return}ias.fire('rendered',[items]);if(callback){callback()}})};return this};IASHistoryExtension.prototype.initialize=function(ias){var self=this;this.ias=ias;jQuery.extend(ias.listeners,this.listeners);ias.prev=function(){return self.prev()};this.prevUrl=this.getPrevUrl()};IASHistoryExtension.prototype.bind=function(ias){ias.on('pageChange',jQuery.proxy(this.onPageChange,this));ias.on('scroll',jQuery.proxy(this.onScroll,this));ias.on('ready',jQuery.proxy(this.onReady,this))};IASHistoryExtension.prototype.unbind=function(ias){ias.off('pageChange',this.onPageChange);ias.off('scroll',this.onScroll);ias.off('ready',this.onReady)};IASHistoryExtension.prototype.prev=function(){var url=this.prevUrl,self=this,ias=this.ias;if(!url){return false}ias.pause();var promise=ias.fire('prev',[url]);promise.done(function(){ias.load(url,function(data,items){self.renderBefore(items,function(){self.prevUrl=self.getPrevUrl(data);ias.resume();if(self.prevUrl){self.prev()}})})});promise.fail(function(){ias.resume()});return true};IASHistoryExtension.prototype.defaults={prev:".prev"};var IASNoneLeftExtension=function(options){options=jQuery.extend({},this.defaults,options);this.ias=null;this.uid=(new Date()).getTime();this.html=(options.html).replace('{text}',options.text);this.showNoneLeft=function(){var $element=jQuery(this.html).attr('id','ias_noneleft_'+this.uid),$lastItem=this.ias.getLastItem();$lastItem.after($element);$element.fadeIn()};return this};IASNoneLeftExtension.prototype.bind=function(ias){this.ias=ias;ias.on('noneLeft',jQuery.proxy(this.showNoneLeft,this))};IASNoneLeftExtension.prototype.unbind=function(ias){ias.off('noneLeft',this.showNoneLeft)};IASNoneLeftExtension.prototype.defaults={text:'You reached the end.',html:''};var IASPagingExtension=function(){this.ias=null;this.pagebreaks=[[0,document.location.toString()]];this.lastPageNum=1;this.enabled=true;this.listeners={pageChange:new IASCallbacks(jQuery)};this.onScroll=function(currentScrollOffset,scrollThreshold){if(!this.enabled){return}var ias=this.ias,currentPageNum=this.getCurrentPageNum(currentScrollOffset),currentPagebreak=this.getCurrentPagebreak(currentScrollOffset),urlPage;if(this.lastPageNum!==currentPageNum){urlPage=currentPagebreak[1];ias.fire('pageChange',[currentPageNum,currentScrollOffset,urlPage])}this.lastPageNum=currentPageNum};this.onNext=function(url){var currentScrollOffset=this.ias.getCurrentScrollOffset(this.ias.$scrollContainer);this.pagebreaks.push([currentScrollOffset,url]);var currentPageNum=this.getCurrentPageNum(currentScrollOffset)+1;this.ias.fire('pageChange',[currentPageNum,currentScrollOffset,url]);this.lastPageNum=currentPageNum};this.onPrev=function(url){var self=this,ias=self.ias,currentScrollOffset=ias.getCurrentScrollOffset(ias.$scrollContainer),prevCurrentScrollOffset=currentScrollOffset-ias.$scrollContainer.height(),$firstItem=ias.getFirstItem();this.enabled=false;this.pagebreaks.unshift([0,url]);ias.one('rendered',function(){for(var i=1,l=self.pagebreaks.length;i<l;i++){self.pagebreaks[i][0]=self.pagebreaks[i][0]+$firstItem.offset().top}var currentPageNum=self.getCurrentPageNum(prevCurrentScrollOffset)+1;ias.fire('pageChange',[currentPageNum,prevCurrentScrollOffset,url]);self.lastPageNum=currentPageNum;self.enabled=true})};return this};IASPagingExtension.prototype.initialize=function(ias){this.ias=ias;jQuery.extend(ias.listeners,this.listeners)};IASPagingExtension.prototype.bind=function(ias){try{ias.on('prev',jQuery.proxy(this.onPrev,this),this.priority)}catch(exception){}ias.on('next',jQuery.proxy(this.onNext,this),this.priority);ias.on('scroll',jQuery.proxy(this.onScroll,this),this.priority)};IASPagingExtension.prototype.unbind=function(ias){try{ias.off('prev',this.onPrev)}catch(exception){}ias.off('next',this.onNext);ias.off('scroll',this.onScroll)};IASPagingExtension.prototype.getCurrentPageNum=function(scrollOffset){for(var i=(this.pagebreaks.length-1);i>0;i--){if(scrollOffset>this.pagebreaks[i][0]){return i+1}}return 1};IASPagingExtension.prototype.getCurrentPagebreak=function(scrollOffset){for(var i=(this.pagebreaks.length-1);i>=0;i--){if(scrollOffset>this.pagebreaks[i][0]){return this.pagebreaks[i]}}return null};IASPagingExtension.prototype.priority=500;var IASSpinnerExtension=function(options){options=jQuery.extend({},this.defaults,options);this.ias=null;this.uid=new Date().getTime();this.src=options.src;this.html=(options.html).replace('{src}',this.src);this.showSpinner=function(){var $spinner=this.getSpinner()||this.createSpinner(),$lastItem=this.ias.getLastItem();$lastItem.after($spinner);$spinner.fadeIn()};this.showSpinnerBefore=function(){var $spinner=this.getSpinner()||this.createSpinner(),$firstItem=this.ias.getFirstItem();$firstItem.before($spinner);$spinner.fadeIn()};this.removeSpinner=function(){if(this.hasSpinner()){this.getSpinner().remove()}};this.getSpinner=function(){var $spinner=jQuery('#ias_spinner_'+this.uid);if($spinner.length>0){return $spinner}return false};this.hasSpinner=function(){var $spinner=jQuery('#ias_spinner_'+this.uid);return($spinner.length>0)};this.createSpinner=function(){var $spinner=jQuery(this.html).attr('id','ias_spinner_'+this.uid);$spinner.hide();return $spinner};return this};IASSpinnerExtension.prototype.bind=function(ias){this.ias=ias;ias.on('next',jQuery.proxy(this.showSpinner,this));ias.on('render',jQuery.proxy(this.removeSpinner,this));try{ias.on('prev',jQuery.proxy(this.showSpinnerBefore,this))}catch(exception){}};IASSpinnerExtension.prototype.unbind=function(ias){ias.off('next',this.showSpinner);ias.off('render',this.removeSpinner);try{ias.off('prev',this.showSpinnerBefore)}catch(exception){}};IASSpinnerExtension.prototype.defaults={src:'',html:'<div class="ias-spinner" style="text-align: center;"><img src="{src}"/></div>'};var IASTriggerExtension=function(options){options=jQuery.extend({},this.defaults,options);this.ias=null;this.html=(options.html).replace('{text}',options.text);this.htmlPrev=(options.htmlPrev).replace('{text}',options.textPrev);this.enabled=true;this.count=0;this.offset=options.offset;this.$triggerNext=null;this.$triggerPrev=null;this.showTriggerNext=function(){if(!this.enabled){return true}if(false===this.offset||++this.count<this.offset){return true}var $trigger=this.$triggerNext||(this.$triggerNext=this.createTrigger(this.next,this.html));var $lastItem=this.ias.getLastItem();$lastItem.after($trigger);$trigger.fadeIn();return false};this.showTriggerPrev=function(){if(!this.enabled){return true}var $trigger=this.$triggerPrev||(this.$triggerPrev=this.createTrigger(this.prev,this.htmlPrev));var $firstItem=this.ias.getFirstItem();$firstItem.before($trigger);$trigger.fadeIn();return false};this.onRendered=function(){this.enabled=true};this.createTrigger=function(clickCallback,html){var uid=(new Date()).getTime(),$trigger;html=html||this.html;$trigger=jQuery(html).attr('id','ias_trigger_'+uid);$trigger.hide();$trigger.on('click',jQuery.proxy(clickCallback,this));return $trigger};return this};IASTriggerExtension.prototype.bind=function(ias){var self=this;this.ias=ias;ias.on('next',jQuery.proxy(this.showTriggerNext,this),this.priority);ias.on('rendered',jQuery.proxy(this.onRendered,this),this.priority);try{ias.on('prev',jQuery.proxy(this.showTriggerPrev,this),this.priority)}catch(exception){}};IASTriggerExtension.prototype.unbind=function(ias){ias.off('next',this.showTriggerNext);ias.off('rendered',this.onRendered);try{ias.off('prev',this.showTriggerPrev)}catch(exception){}};IASTriggerExtension.prototype.next=function(){this.enabled=false;this.ias.pause();if(this.$triggerNext){this.$triggerNext.remove();this.$triggerNext=null}this.ias.next()};IASTriggerExtension.prototype.prev=function(){this.enabled=false;this.ias.pause();if(this.$triggerPrev){this.$triggerPrev.remove();this.$triggerPrev=null}this.ias.prev()};IASTriggerExtension.prototype.defaults={text:'Load more items',html:'<div class="ias-trigger ias-trigger-next wow fadeInUp" data-wow-delay="0.2s"><a class="mdc-ripple-surface mdc-ripple-panyi" id="next-page">{text}</a></div>',textPrev:'Load previous items',htmlPrev:'<div class="ias-trigger ias-trigger-prev"><a>{text}</a></div>',offset:0};IASTriggerExtension.prototype.priority=1000;